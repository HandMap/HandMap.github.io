<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> <title>HSV vs. RGB &#8211; Hand Map</title> <meta name="description" content="I got tired of not really understanding why HSV was performing better for me over RGB… So I did some digging!"> <meta name="keywords" content="RGB, HSV"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="halve.png"> <meta name="twitter:title" content="HSV vs. RGB"> <meta name="twitter:description" content="I got tired of not really understanding why HSV was performing better for me over RGB… So I did some digging!"> <meta name="twitter:site" content="@nathangloverAUS"> <meta name="twitter:creator" content="@nathangloverAUS"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="HSV vs. RGB"> <meta property="og:description" content="I got tired of not really understanding why HSV was performing better for me over RGB… So I did some digging!"> <meta property="og:url" content="https://handmap.github.io/hsv-vs-rgb/"> <meta property="og:site_name" content="Hand Map"> <meta property="og:image" content="https://handmap.github.io/images/halve.png"> <link rel="canonical" href="https://handmap.github.io/hsv-vs-rgb/"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Feed --> <link type="application/atom+xml" rel="alternate" href="https://handmap.github.io/feed.xml" title="Hand Map" /> <!-- Favicons --> <link rel="shortcut icon" type="image/png" href="https://handmap.github.io/favicon.png" /> <link rel="shortcut icon" href="https://handmap.github.io/favicon.ico" /> <!-- CSS --> <link rel="stylesheet" type="text/css" href="https://handmap.github.io/assets/css/main.css"> <!-- Left Block Image for Posts --> <style type="text/css"> #posts.inner-post-page .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(https://handmap.github.io/images/unsplash-gallery-image-3.jpg) no-repeat;background-size: cover;} </style> <!-- Left Block Images for Home and Pages --> <style type="text/css"> #posts .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(https://handmap.github.io/images/unsplash-image-10.jpg) no-repeat;background-size: cover, cover;} .block-left {background: linear-gradient(rgba(44,45,51,0.9), rgba(44,45,51,0.9)), url(https://handmap.github.io/images/home.png) no-repeat;background-size: cover;} </style> </head> <body id="posts" class="inner-post-page"> <div class="block-left"> <div class="content"> <a href="https://handmap.github.io" class="logo"><img src="https://handmap.github.io/images/halve.png"></a> <div class="post-title-section"> <div class="section-line">Posts <em>/</em></div> <h1 class="section-title">HSV vs. RGB </h1> <ul class="tags"> <li><a href="https://handmap.github.io/tags#RGB">RGB</a></li> <li><a href="https://handmap.github.io/tags#HSV">HSV</a></li> </ul> <div class="section-line reverse"><a href="https://handmap.github.io/posts">Back to posts</a> <em>/</em></div> </div> </div> </div> <div class="block-right"> <div class="share-buttons"> <a href="https://twitter.com/intent/tweet?text=https://handmap.github.io/hsv-vs-rgb/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=https://handmap.github.io/hsv-vs-rgb/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://plus.google.com/share?url=https://handmap.github.io/hsv-vs-rgb/" class="btn btn_google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a> </div> <a href="../posts.html" title="posts" class="posts-menu-icon"></a> <a title="projects" class="projects-menu-icon"> <span></span> </a> <div class="inner-post content"> <div class="date-highlight">26 Oct 2016</div> <h2 id="introduction">Introduction</h2> <hr /> <p>During a previous post I transitioned from using an RGB detection method to a HSV one. At the time I didn’t really understand why it worked more effectively so I just went along with what I was reading and told myself I would come back to it if an issue arose where I really needed to understand.</p> <p>Well that time has come, particularly when I started trying to work with Yellow/Neon objects like the block sensor seen below.</p> <figure> <img src="https://handmap.github.io/images/posts/2016-10-26/opencv-hand-blocks.png" alt="Lego brick sensor" /> <figcaption>Lego brick sensor</figcaption> </figure> <h2 id="practical-example">Practical Example</h2> <hr /> <p>I found a really well written explanation regarding why it’s so much easier to perform colour detection with HSV in a response to a post by <a href="http://dsp.stackexchange.com/a/2689">penelope</a>. Take a look at the stop sign pictured below:</p> <figure> <img src="https://handmap.github.io/images/posts/2016-10-26/stop-sign-shadowing.jpg" alt="Shadowed Stop Sign" /> <figcaption>Shadowed stop sign</figcaption> </figure> <p>If we wanted to detect the stop sign in the image above, the first thing you’d think of trying is to try and scan for the colour red, or (255, 0, 0) in RGB. However this RGB value is extremely specific so the chances of actually finding true red in the image is extremely unlikely.</p> <p>Next you might think to yourself, Ok well I’ll instead search for the colour red in a range of RGB values and just change the R (130, 0, 0) -&gt; (255, 0, 0). However this doesn’t really solve the problem because most of the colour red in the stop sign image is still a mix of all three primary colours</p> <figure> <img src="https://handmap.github.io/images/posts/2016-10-26/stop-sign-red-rgb.png" alt="RGB Red colour example" /> <figcaption>RGB Red colour example</figcaption> </figure> <p>So at this point we could continue going down this path, changing the RGB range for all three primary colour values; but it honestly requires a lot of effort to cover all our bases and even if somehow we do manage to get a reasonable range setup it’s very likely we’ll end up with a lot of noise in the fields we detect.</p> <p>We need a method that doesn’t have to many parameters in order to simplify our detection space. This is where HSV comes into the picture (excuse the pun).</p> <h2 id="comparison">Comparison</h2> <hr /> <p>Let me quickly go over how colour is represented in each of the colour spaces.</p> <h3 id="rgb">RGB</h3> <hr /> <p>RGB is defined by listing how much red, green and blue is contained in a single value. It uses an additive method where the more of each colour is added, the brighter it becomes.</p> <figure> <img src="https://handmap.github.io/images/posts/2016-10-26/opencv-rgb-diagram.png" alt="RGB" /> <figcaption>RGB Colour Space</figcaption> </figure> <p>When you are looking at a particular colour it’s extremely difficult to arbitrarily dictate how much of each primary colour composes it.</p> <h3 id="hsv">HSV</h3> <hr /> <p>HSV on the other hand uses three paramters to describe colour:</p> <ol> <li>Hue</li> <li>Saturation</li> <li>Value</li> </ol> <figure> <img src="https://handmap.github.io/images/posts/2016-10-26/opencv-hsv-cone.jpg" alt="HSV" /> <figcaption>HSV Colour Space</figcaption> </figure> <p>With HSV with we now describe our colour using a much more cement method as we only theoretically need to transform the Hue to capture the ‘red’ like colour.</p> <p>OpenCV uses the following ranges to represent each of the parameters in the HSV spectrum</p> <ol> <li>Hue: [0, 179]</li> <li>Saturation [0, 255]</li> <li>Value [0, 255]</li> </ol> <p>Looking at the red colour ranges we used in the previous post:</p> <div class="language-cpp highlighter-rouge"><pre class="highlight"><code><span class="n">min_red</span> <span class="o">=</span> <span class="n">cv</span><span class="o">::</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">150</span><span class="p">,</span><span class="mi">150</span><span class="p">);</span>
<span class="n">max_red</span> <span class="o">=</span> <span class="n">cv</span><span class="o">::</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">);</span>
</code></pre></div> <p>We produce the following range for the low Hue value</p> <figure> <img src="https://handmap.github.io/images/posts/2016-10-26/hsv-colour-plot-red-low.png" alt="Red Low Hue" /> <figcaption>Red - Low Hue</figcaption> </figure> <p>And the following is produced for the high Hue value</p> <figure> <img src="https://handmap.github.io/images/posts/2016-10-26/hsv-colour-plot-red-high.png" alt="Red High Hue" /> <figcaption>Red - High Hue</figcaption> </figure> <p>Obviously it’s still not completely perfect as we capture a fair amount of Orange with this range as well. But It allows us to target a huge set of red-like colours in a specific range without too much overall noise.</p> <h2 id="references">References</h2> <hr /> <p>Why do we use the HSV colour space so often in vision and image processing? - <a href="http://dsp.stackexchange.com/questions/2687/why-do-we-use-the-hsv-colour-space-so-often-in-vision-and-image-processing">http://dsp.stackexchange.com/questions/2687/why-do-we-use-the-hsv-colour-space-so-often-in-vision-and-image-processing</a></p> <p>A Little About Color: HSV vs. RGB - <a href="https://www.kirupa.com/design/little_about_color_hsv_rgb.htm">https://www.kirupa.com/design/little_about_color_hsv_rgb.htm</a></p> <p>Color Filtering - OpenCV - <a href="https://youtu.be/CCOXg75HkvM?list=PLQVvvaa0QuDdttJXlLtAJxJetJcqmqlQq">https://youtu.be/CCOXg75HkvM?list=PLQVvvaa0QuDdttJXlLtAJxJetJcqmqlQq</a></p> <p>HSV inRange Colour Plot - <a href="http://answers.opencv.org/question/28899/correct-hsv-inrange-values-for-red-objects/">http://answers.opencv.org/question/28899/correct-hsv-inrange-values-for-red-objects/</a></p> <p>OpenCV Colour Plot Code hosting - <a href="https://github.com/HandMap/openCVColourPlot">https://github.com/HandMap/openCVColourPlot</a></p> <br> <a href="https://twitter.com/intent/tweet?text=https://handmap.github.io/hsv-vs-rgb/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=https://handmap.github.io/hsv-vs-rgb/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://plus.google.com/share?url=https://handmap.github.io/hsv-vs-rgb/" class="btn btn_google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a> <nav class="pagination"> <a href="https://handmap.github.io/angle-mapping-based-on-hsv-colour-detection/" class="pagination_pager" title="Angle mapping w/ HSV detection ">previous</a> <a href="https://handmap.github.io/video-3-progress-report/" class="pagination_pager" title="Video 3 - Progress Report ">next</a> </nav> </div> </div> <!-- JS --> <script src="https://handmap.github.io/assets/js/main.min.js"></script> <!-- Asynchronous Google Analytics snippet --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-71336829-11', 'auto'); ga('require', 'linkid', 'linkid.js'); ga('send', 'pageview'); </script> <div class="overlay"> <ul class="projects-menu"> <li style="background:url(https://github.com/HandMap/HandMap.github.io/blob/master/images/project.jpg) center center no-repeat;"> <a href="https://handmap.github.io" class="inactive" target="_blank" rel="nofollow external"> <span> Hand Map Project <br><em>in progress</em> </span> </a> </li> </ul> </div> </body> </html>
